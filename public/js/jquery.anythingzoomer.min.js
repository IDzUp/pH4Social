/*!
    AnythingZoomer v2.2.2 minified
    Original by Chris Coyier: http://css-tricks.com
    Get the latest version: https://github.com/CSS-Tricks/AnythingZoomer
*/

;(function(d){d.anythingZoomer=function(e,i){var b,c,f,a=this;a.$wrap=d(e);a.wrap=e;a.$wrap.data("zoomer",a);a.init=function(){a.options=c=d.extend({},d.anythingZoomer.defaultOptions,i);b=d.anythingZoomer.classNames;a.state=!0;a.enabled=!0;a.hovered=!1;a.$wrap.addClass(b.wrap).wrapInner('<span class="'+b.wrapInner+'"/>');a.$inner=a.$wrap.find("."+b.wrapInner);a.$small=a.$wrap.find("."+c.smallArea);a.$large=a.$wrap.find("."+c.largeArea);a.update();a.$large.addClass(b.large);a.$small.addClass(b.small); a.$inner.bind("mouseenter"+b.namespace,function(){a.saved=a.enabled;a.hovered=!0;c.delay?(clearTimeout(a.delay),a.enabled=!1,a.delay=setTimeout(function(){a.enabled=a.saved;a.position.type="mousemove";a.$inner.trigger(a.position);a.reveal()},c.delay)):a.reveal()}).bind("mouseleave"+b.namespace,function(){a.hovered=!1;c.delay&&(clearTimeout(a.delay),a.enabled=a.saved);a.state&&a.enabled&&(a.timer=setTimeout(function(){a.$zoom.hasClass(b.windowed)&&a.hideZoom(!0)},200))}).bind("mousemove"+b.namespace, function(b){a.position=b;if(a.hovered&&a.state&&a.enabled){clearTimeout(a.timer);var c=a.$small.offset();a.zoomAt(b.pageX-c.left,b.pageY-c.top,null,!0)}}).bind(c.switchEvent+(""!==c.switchEvent?b.namespace:""),function(){a.enabled&&(a.state?a.showLarge():a.showSmall())});a.showSmall();d.each(["initialized","zoomed","unzoomed"],function(b,h){d.isFunction(c[h])&&a.$wrap.bind(h,c[h])});a.initialized=!0;a.$wrap.trigger("initialized",a)};a.reveal=function(){a.enabled=a.saved;a.state&&a.enabled&&(a.$zoom.stop(!0, !0).fadeIn(c.speed),c.overlay&&a.$overlay.addClass(b.overlay),a.$smInner.addClass(b.hovered),a.$wrap.trigger("zoom",a))};a.update=function(){a.initialized&&a.showSmall();a.$smInner=a.$small.find("."+b.smallInner).length?a.$small.find("."+b.smallInner):a.$small.wrapInner('<span class="'+b.smallInner+'"/>').find("."+b.smallInner);a.$small.find("."+b.overly).remove();c.clone&&(f=a.$smInner.clone().removeClass(b.smallInner).addClass(b.largeInner),a.$large.length?a.$large.html(f.html()):(f.wrap('<div class="'+ c.largeArea+'">'),a.$small.after(f.parent()),a.$large=a.$wrap.find("."+c.largeArea)));a.$lgInner=a.$large.find("."+b.largeInner).length?a.$large.find("."+b.largeInner):a.$large.wrapInner('<span class="'+b.largeInner+'"/>').find("."+b.largeInner);a.$wrap.find("."+b.zoom).length||(a.$large.wrap('<div class="'+b.zoom+'"/>'),a.$zoom=a.$wrap.find("."+b.zoom));c.edit&&!a.edit&&(a.edit=d('<span class="'+b.edit+'"></span>').appendTo(a.$zoom));a.$zoom.show();a.largeDim=[a.$lgInner.children().width(),Math.max(a.$lgInner.height(), a.$lgInner.children().height())];a.zoomDim=a.last=[a.$zoom.width(),a.$zoom.height()];a.$zoom.hide();a.smallDim=[a.$smInner.children().width(),a.$small.height()];a.$overlay=d('<div class="'+b.overly+'" style="position:absolute;left:0;top:0;" />').prependTo(a.$small);a.ratio=[a.largeDim[0]/(a.smallDim[0]||1),a.largeDim[1]/(a.smallDim[1]||1)];a.$inner.add(a.$overlay).css({width:a.smallDim[0],height:a.smallDim[1]})};a.showSmall=function(){a.state=!0;a.$small.show();a.$zoom.removeClass(b.expanded).addClass(b.windowed+ " "+b.zoom).css({width:a.zoomDim[0],height:a.zoomDim[1]});a.$inner.css({width:a.smallDim[0],height:a.smallDim[1]})};a.showLarge=function(){a.state=!1;a.$small.hide();a.$zoom.stop(!0,!0).fadeIn(c.speed).addClass(b.expanded).removeClass(b.windowed+" "+b.zoom).css({height:"auto",width:"auto"});a.$inner.css({width:a.largeDim[0],height:a.largeDim[1]});a.$large.css({left:0,top:0,width:a.largeDim[0],height:a.largeDim[1]})};a.setTarget=function(g,h,n){var e=0,f=0;clearTimeout(a.timer);a.$zoom.hasClass(b.windowed)|| a.showSmall();!isNaN(g)&&!isNaN(h)?(e=parseInt(g,10),f=parseInt(h,10)):"string"===typeof g&&d(g).length&&(g=d(g),e=g.position().left+g.width()/2+(h?h[0]||0:0),f=g.position().top+g.height()/2+(h?h[1]||0:0));a.zoomAt(e,f,n);c.overlay&&a.$overlay.addClass(b.overlay);a.$smInner.addClass(b.hovered);a.$wrap.trigger("zoom",a)};a.zoomAt=function(b,d,e,f){var i=(e?e[0]||0:0)||a.last[0],e=(e?e[1]||e[0]||0:0)||a.last[1],j=i/2,k=e/2,l=c.edge||(0===c.edge?0:0.66*j),m=c.edge||(0===c.edge?0:0.66*k),p=parseInt(a.$inner.css("margin-left"), 10)||a.$inner.position().left||0;a.last=[i,e];a.current=[b,d];c.edit&&a.edit.html(Math.round(b)+", "+Math.round(d));b<-l||b>a.smallDim[0]+l||d<-m||d>a.smallDim[1]+m?a.hideZoom(f):(a.$zoom.stop(!0,!0).fadeIn(c.speed),a.$zoom.css({left:b-j+p,top:d-k,width:i,height:e}),a.$large.css({left:-(b-c.offsetX-j/2)*a.ratio[0],top:-(d-c.offsetY-k/2)*a.ratio[1]}))};a.hideZoom=function(d){d&&a.$smInner.hasClass(b.hovered)&&a.$wrap.trigger("unzoom",a);a.last=a.zoomDim;a.$zoom.stop(!0,!0).fadeOut(c.speed);a.$overlay.removeClass(b.overlay); a.$smInner.removeClass(b.hovered);a.lastKey=null};a.setEnabled=function(b){a.enabled=b;b||(a.showSmall(),a.hideZoom())};a.init()};d.anythingZoomer.classNames={namespace:".anythingZoomer",wrap:"az-wrap",wrapInner:"az-wrap-inner",large:"az-large",largeInner:"az-large-inner",small:"az-small",smallInner:"az-small-inner",overlay:"az-overlay",overly:"az-overly",hovered:"az-hovered",zoom:"az-zoom",windowed:"az-windowed",expanded:"az-expanded",edit:"az-coords"};d.anythingZoomer.defaultOptions={smallArea:"small", largeArea:"large",clone:!1,overlay:!1,speed:100,edge:30,offsetX:0,offsetY:0,delay:0,switchEvent:"dblclick",edit:!1};d.fn.anythingZoomer=function(e,i,b,c){return this.each(function(){var f=d(this).data("zoomer");if(/object|undefined/.test(typeof e))f?f.update():new d.anythingZoomer(this,e);else if(f&&("string"===typeof e||!isNaN(e)&&!isNaN(i)))/(en|dis)able/.test(e)?f.setEnabled("enable"===e):f.setTarget(e,i,b,c)})};d.fn.getAnythingZoomer=function(){return this.data("zoomer")}})(jQuery);
